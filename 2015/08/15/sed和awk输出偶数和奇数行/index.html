
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="9vpyr9VH4h" />
  
    <title>sed和awk输出奇偶数行 | ideas into codes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="djskl">
    

    
    <meta name="description" content="实验文本

[root@localhost ~]# cat pets.txtThis is my cat  my cat’s name is bettyThis is my dog  my dog’s name is frankThis is my fish  my fish’s name is georgeThis is my goat  my goat’s name is adam

sed命">
<meta property="og:type" content="article">
<meta property="og:title" content="sed和awk输出奇偶数行">
<meta property="og:url" content="http://1988zxh.com/2015/08/15/sed和awk输出偶数和奇数行/index.html">
<meta property="og:site_name" content="ideas into codes">
<meta property="og:description" content="实验文本

[root@localhost ~]# cat pets.txtThis is my cat  my cat’s name is bettyThis is my dog  my dog’s name is frankThis is my fish  my fish’s name is georgeThis is my goat  my goat’s name is adam

sed命">
<meta property="og:updated_time" content="2015-08-29T03:13:19.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sed和awk输出奇偶数行">
<meta name="twitter:description" content="实验文本

[root@localhost ~]# cat pets.txtThis is my cat  my cat’s name is bettyThis is my dog  my dog’s name is frankThis is my fish  my fish’s name is georgeThis is my goat  my goat’s name is adam

sed命">

    
    <link rel="alternative" href="/atom.xml" title="ideas into codes" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="ideas into codes">ideas into codes</a></h1>
				<h2 class="blog-motto">行侠何须仗名剑，我自成佛不读经</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<span style="width:50px;display:inline-block;"></span>
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/15/sed和awk输出偶数和奇数行/" title="sed和awk输出奇偶数行" itemprop="url">sed和awk输出奇偶数行</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="djskl" target="_blank" itemprop="author">djskl</a>
		
  <p class="article-time">
    <time datetime="2015-08-14T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-15</time>
    
  </p>
</header>
	<div class="article-content">
		
		<p><strong>实验文本</strong></p>
<blockquote>
<p>[root@localhost ~]# cat pets.txt<br>This is my cat<br>  my cat’s name is betty<br>This is my dog<br>  my dog’s name is frank<br>This is my fish<br>  my fish’s name is george<br>This is my goat<br>  my goat’s name is adam</p>
</blockquote>
<p><strong>sed命令</strong><br><strong>方式1</strong></p>
<blockquote>
<p>[root@localhost ~]# sed ‘n;p’ pets.txt -n  #输出偶数行<br>[root@localhost ~]# sed ‘p;n’ pets.txt -n   #输出奇数行</p>
</blockquote>
<p><strong>解析</strong><br>sed命令执行时将文本<code>逐行</code>读到模式空间(pattern space)中，然后进行处理，结束后输出处理结果并清空模式空间，然后再读取下一行，如此循环直接全部处理结束。<br>如果添加了<code>n</code>或<code>N</code>命令，除当前行外，下一行也会被读取到模式空间中，不同的是：<code>n</code>读取后，忽略当前行，处理下一行，<code>N</code>读取后，会将当前行与下一行当作一行来处理。<br>下面看一个<code>N</code>的<a href="http://coolshell.cn/articles/9104.html" target="_blank" rel="external">例子</a>：</p>
<blockquote>
<p>[root@localhost ~]# sed ‘N;s/my/your/1’ pets.txt<br>This is your cat<br>  my cat’s name is betty<br>This is your dog<br>  my dog’s name is frank<br>This is your fish<br>  my fish’s name is george<br>This is your goat<br>  my goat’s name is adam</p>
<p>[root@localhost ~]# sed ‘N;s/\n/,/‘ pets.txt<br>This is my cat,  my cat’s name is betty<br>This is my dog,  my dog’s name is frank<br>This is my fish,  my fish’s name is george<br>This is my goat,  my goat’s name is adam</p>
</blockquote>
<p><strong>方式2</strong></p>
<blockquote>
<p>[root@localhost ~]# sed ‘0~2p’ pets.txt -n #输出偶数行<br>[root@localhost ~]# sed ‘1~2p’ pets.txt -n  #输出奇数行</p>
</blockquote>
<p><strong>解析</strong></p>
<blockquote>
<p>first~step<br>Match every step’th line starting with line first.  For example, ``sed -n 1~2p’’ will print all the odd-numbered lines in the  input stream, and the address 2~5 will match every fifth line, starting with the second.  first can be zero; in this case, sed operates as if it were equal to step.</p>
</blockquote>
<p>以上出自<code>man sed</code></p>
<p><strong>awk命令</strong><br>这个就比较简单了，比较直接的方式如下：</p>
<blockquote>
<p>[root@localhost ~]#awk ‘!(NR%2)’ pets.txt  #输出偶数行<br>[root@localhost ~]# awk ‘NR%2’ pets.txt     #输出奇数行</p>
</blockquote>
<p>以上代码等同于：</p>
<blockquote>
<p>[root@localhost ~]#awk ‘{if(NR%2 == 0){print}}’ pets.txt   #输出偶数行<br>[root@localhost ~]# awk ‘{if(NR%2 == 1){print;}}’ pets.txt  #输出奇数行</p>
</blockquote>
<p><strong>参考</strong><br><a href="http://coolshell.cn/articles/9104.html" target="_blank" rel="external">sed 简明教程</a><br><a href="http://www.cnblogs.com/fhefh/archive/2011/11/14/2248942.html" target="_blank" rel="external">linux：sed高级命令之n、N</a><br><a href="http://blog.chinaunix.net/uid-10540984-id-316081.html" target="_blank" rel="external">awk &amp; sed之奇数行与偶数行的打印</a><br><a href="http://bbs.linuxtone.org/thread-16543-1-1.html" target="_blank" rel="external">awk 输出奇数行 不理解 </a></p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/shell/">shell</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/awk/">awk</a><a href="/tags/sed/">sed</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://1988zxh.com/2015/08/15/sed和awk输出偶数和奇数行/" data-title="sed和awk输出奇偶数行 | ideas into codes" data-tsina="undefined" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/08/18/awk处理空格分隔符/" title="awk处理空格分隔符">
  <strong>上一篇：</strong><br/>
  <span>
  awk处理空格分隔符</span>
</a>
</div>


<div class="next">
<a href="/2015/08/15/Django中model字段的验证/"  title="Django中model字段的验证">
 <strong>下一篇：</strong><br/> 
 <span>Django中model字段的验证
</span>
</a>
</div>

</nav>

	

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/python/" title="python">python<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/shell/" title="shell">shell<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端/" title="前端">前端<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/数据库/" title="数据库">数据库<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/算法/" title="算法">算法<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/awk/" title="awk">awk<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/二叉树/" title="二叉树">二叉树<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/递归/" title="递归">递归<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/sed/" title="sed">sed<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/装饰器/" title="装饰器">装饰器<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/作用域/" title="作用域">作用域<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/oop/" title="oop">oop<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/分区表/" title="分区表">分区表<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/inspectdb/" title="inspectdb">inspectdb<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/validation/" title="validation">validation<sup>1</sup></a></li>
			
		
		</ul>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2015 
		
		<a href="/about" target="_blank" title="djskl">djskl</a>
		
		
		</p>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','vFmYG2ZLAiTvJ8vyggQN','2.0.0');
</script>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>









<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
